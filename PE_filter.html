<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfiles de Egreso - Universidades Chilenas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root{--primary-blue:#1A3C5A;--secondary-gray:#F5F6F5;--text-dark:#333;--accent-blue:#4A90E2;--border-gray:#D3D3D3}*{margin:0;padding:0;box-sizing:border-box}body{background-color:var(--secondary-gray);color:var(--text-dark);font-family:'Roboto',sans-serif;line-height:1.6;overflow-x:hidden;margin:0;padding:0;min-height:100vh;display:flex;flex-direction:column}nav{position:fixed;top:0;width:100%;background:var(--primary-blue);z-index:1000;padding:15px 0;border-bottom:1px solid var(--border-gray)}nav ul{display:flex;justify-content:center;list-style:none;flex-wrap:wrap}nav ul li{position:relative;margin:0 20px}nav ul li a{color:#FFF;text-decoration:none;font-size:1.1em;transition:color .3s ease}nav ul li a:hover{color:var(--accent-blue)}.main-container{max-width:100%;margin:0;padding:60px 10px 0;text-align:center;flex:1;width:100%}.intro{margin-bottom:40px;background:#FFF;padding:20px;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.05)}.intro h1{color:var(--primary-blue);font-size:2.5em;margin-bottom:20px}.intro p{font-size:1.1em;max-width:1000px;margin:0 auto 15px}.highlight{color:var(--accent-blue);font-weight:700}.filter-container{margin-bottom:20px}.filter-container input{padding:10px;font-size:1em;font-family:'Roboto',sans-serif;background:#FFF;color:var(--text-dark);border:1px solid var(--border-gray);border-radius:5px;outline:none;width:300px;transition:border-color .3s ease}.filter-container input:focus{border-color:var(--accent-blue)}.grid-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;padding:0 20px}.university-card{background:#FFF;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.05);padding:20px;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;display:flex;flex-direction:column;align-items:center}.university-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}.university-card img{width:100px;height:100px;object-fit:contain;margin-bottom:15px;loading:lazy}.university-card h3{color:var(--primary-blue);margin-bottom:10px;text-align:center}.university-card p{color:var(--text-dark);font-size:.9em;text-align:center}.profile-modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);overflow:auto}.modal-content{background-color:#FFF;margin:10% auto;padding:30px;border-radius:5px;box-shadow:0 5px 15px rgba(0,0,0,.3);width:80%;max-width:800px;max-height:80vh;overflow-y:auto;position:relative}.close-button{position:absolute;top:15px;right:20px;font-size:30px;font-weight:700;color:var(--text-dark);cursor:pointer}.close-button:hover{color:var(--accent-blue)}.modal-header{margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border-gray)}.modal-header h2{color:var(--primary-blue);font-size:1.8em}.modal-body{line-height:1.8;text-align:justify}.modal-body p{margin-bottom:15px}.modal-body ul{padding-left:20px;margin-bottom:15px}.modal-body li{margin-bottom:5px}.footer{background:var(--primary-blue);color:#FFF;text-align:center;padding:20px 0;margin-top:40px}
        /* Markdown Styles */
        .modal-body h1, .modal-body h2, .modal-body h3 {color: var(--primary-blue); margin-bottom: 15px;}
        .modal-body h1 {font-size: 1.8em;} .modal-body h2 {font-size: 1.5em;} .modal-body h3 {font-size: 1.3em;}
        .modal-body ul, .modal-body ol {padding-left: 30px; margin-bottom: 15px;}
        .modal-body li {margin-bottom: 8px;}
        .modal-body strong {font-weight: 700;}
        .modal-body em {font-style: italic;}
        .modal-body a {color: var(--accent-blue); text-decoration: underline;}
        .modal-body a:hover {color: var(--primary-blue);}
        .modal-body blockquote {border-left: 4px solid var(--accent-blue); padding-left: 15px; margin: 15px 0; color: #666;}
        .modal-body code {background: #f4f4f4; padding: 2px 5px; border-radius: 3px; font-family: monospace;}
        .modal-body pre {background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto;}
        /* Comparador Styles */
        .compare-container {background: #FFF; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,.05); margin: 40px auto; max-width: 1200px;}
        .compare-container h2 {color: var(--primary-blue); font-size: 1.8em; margin-bottom: 20px;}
        .compare-controls {display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;}
        .compare-controls input, .compare-controls select {padding: 10px; font-size: 1em; border: 1px solid var(--border-gray); border-radius: 5px; width: 300px; max-width: 100%; background: #FFF; color: var(--text-dark);}
        .compare-controls input:focus, .compare-controls select:focus {outline: none; border-color: var(--accent-blue);}
        .compare-content {display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;}
        .compare-profile {flex: 1; min-width: 300px; max-width: 550px; background: #FFF; padding: 15px; border: 1px solid var(--border-gray); border-radius: 5px; overflow-y: auto; max-height: 60vh;}
        .compare-profile h3 {color: var(--primary-blue); margin-bottom: 10px;}
        .compare-profile .content {line-height: 1.8; text-align: justify;}
        @media (max-width:900px){nav ul{flex-direction:column;align-items:center;padding:10px 0}nav ul li{margin:10px 0;width:100%;text-align:center}.intro h1{font-size:2em}.intro p{font-size:1em;padding:0 15px}.filter-container input{width:100%}.grid-container{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.modal-content{margin:20% auto;width:90%;padding:20px}.compare-controls{flex-direction:column;align-items:center}.compare-controls input, .compare-controls select{width:100%}}
        @media (max-width:600px){nav{position:static}.main-container{padding-top:10px}.intro h1{font-size:1.5em}.intro p{font-size:.9em}.grid-container{grid-template-columns:1fr;padding:0 10px}}.highlight-match{background-color:#FFEB3B;padding:0 2px;border-radius:2px}
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#inicio">Inicio</a></li>
            <li><a href="#universidades">Universidades</a></li>
            <li><a href="#acerca">Acerca de</a></li>
        </ul>
    </nav>
    <div class="main-container" id="inicio">
        <div class="intro">
            <h1>Perfiles de Egreso - Universidades Chilenas</h1>
            <p>Esta plataforma presenta los <span class="highlight">perfiles de egreso</span> de diversas universidades chilenas. Cada perfil refleja las competencias, valores y habilidades que caracterizan a los graduados de cada institución según su proyecto educativo.</p>
            <p>Utiliza el buscador para filtrar por nombre de universidad o por palabras clave presentes en los perfiles. Puedes usar abreviaturas como <span class="highlight">uchile</span>, <span class="highlight">uss</span>, <span class="highlight">puc</span>, etc.</p>
        </div>
        <div class="filter-container" id="universidades">
            <input type="text" id="search" placeholder="Buscar por universidad o palabras clave...">
        </div>
        <div class="grid-container" id="university-grid"></div>
        <div id="profile-modal" class="profile-modal">
            <div class="modal-content">
                <span class="close-button" onclick="closeModal()">×</span>
                <div class="modal-header">
                    <h2 id="modal-title">Perfil de Egreso</h2>
                </div>
                <div class="modal-body" id="modal-body"></div>
            </div>
        </div>
        <div class="compare-container" id="compare-section">
            <h2>Comparar Perfiles de Egreso</h2>
            <div class="compare-controls">
                <input type="text" id="compare-search" placeholder="Busca universidad o palabra clave...">
                <select id="compare-select">
                    <option value="">Selecciona una universidad</option>
                </select>
            </div>
            <div class="compare-content" id="compare-content">
                <div class="compare-profile" id="compare-profile-1">
                    <h3>Perfil 1</h3>
                    <div class="content">Busca una universidad o palabra clave.</div>
                </div>
                <div class="compare-profile" id="compare-profile-2">
                    <h3>Perfil 2</h3>
                    <div class="content">Selecciona una universidad.</div>
                </div>
            </div>
        </div>
        <div class="intro" id="acerca" style="margin-top:40px;">
            <h1>Acerca de este Proyecto</h1>
            <p>Esta plataforma fue desarrollada para facilitar el acceso y comparación de los perfiles de egreso de las principales universidades chilenas. Los textos presentados corresponden a información oficial de cada institución.</p>
            <p>Desarrollado por: Leandro Torres Díaz, PhD.</p>
        </div>
    </div>
    <footer class="footer">
        <p>© 2025 - Perfiles de Egreso Universidades Chilenas</p>
    </footer>
    <script>
        const universities = [
            {id:"uantof",name:"Universidad de Antofagasta",shortName:"uantof",logoUrl:"https://transparencia.uantof.cl/vistas/plantillas_images/escudo.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/uantof.txt"},
            {id:"ubb",name:"Universidad del Bío-Bío",shortName:"ubb",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/a/a2/Escudo_Universidad_del_B%C3%ADo-B%C3%ADo.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ubb.txt"},
            {id:"ubo",name:"Universidad Bernardo O'Higgins",shortName:"ubo",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/1_logo_ubo.png/250px-1_logo_ubo.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ubo.txt"},
            {id:"uchile",name:"Universidad de Chile",shortName:"uchile",logoUrl:"https://portaluchile.uchile.cl//.imaging/default/dam/imagenes/Uchile/imagenes-contenidos-generales/7910_0_escudouchiledescargar_S/jcr:content.jpg",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/uchile.txt"},
            {id:"ucm",name:"Universidad Católica del Maule",shortName:"ucm",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Escudo_UCM.png/960px-Escudo_UCM.png?20210817151245",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ucm.txt"},
            {id:"ucn",name:"Universidad Católica del Norte",shortName:"ucn",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/92/Logo_Universidad_Cat%C3%B3lica_del_Norte.jpg",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ucn.txt"},
            {id:"uct",name:"Universidad Católica de Temuco",shortName:"uct",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Universidad_Cat%C3%B3lica_de_Temuco_logo.jpg/960px-Universidad_Cat%C3%B3lica_de_Temuco_logo.jpg?20150420080123",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/uct.txt"},
            {id:"udd",name:"Universidad del Desarrollo",shortName:"udd",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/1/18/Logo_final_udd_tz.jpg",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/udd.txt"},
            {id:"ufro",name:"Universidad de La Frontera",shortName:"ufro",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Logo_Nuevo_Ufro.jpg/960px-Logo_Nuevo_Ufro.jpg?20100526154504",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ufro.txt"},
            {id:"ulagos",name:"Universidad de Los Lagos",shortName:"ulagos",logoUrl:"https://www.educalt.com/wp-content/uploads/2021/10/ULAGOS_ESC-300x300.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/ulagos.txt"},
            {id:"unab",name:"Universidad Andrés Bello",shortName:"unab",logoUrl:"https://vinculacion.unab.cl/wp-content/uploads/2018/06/fondo-transparente-logo-color-con-texto-azul.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/unab.txt"},
            {id:"unach",name:"Universidad Adventista de Chile",shortName:"unach",logoUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSg5a9_Kk2OheR22v-7ekJ_6TO1XvoN5FhsDw&s",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/unach.txt"},
            {id:"usach",name:"Universidad de Santiago de Chile",shortName:"usach",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Escudo_de_la_Universidad_de_Santiago-3.svg/504px-Escudo_de_la_Universidad_de_Santiago-3.svg.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/usach.txt"},
            {id:"uss",name:"Universidad San Sebastián",shortName:"uss",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/c/c4/Logo_Universidad_san_sebastian.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/uss.txt"},
            {id:"utem",name:"Universidad Tecnológica Metropolitana",shortName:"utem",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/4/43/Logo_UTEM.png?20150417163646",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/utem.txt"},
            {id:"puc",name:"Pontificia Universidad Católica de Chile",shortName:"puc",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Escudo_de_la_Pontificia_Universidad_Cat%C3%B3lica_de_Chile.svg/800px-Escudo_de_la_Pontificia_Universidad_Cat%C3%B3lica_de_Chile.svg.png",profileUrl:"https://raw.githubusercontent.com/Leandro8787/Quimica-y-Farmacia/refs/heads/main/uc.txt"}
        ];
        const profileCache={};
        const grid=document.getElementById('university-grid');
        const searchInput=document.getElementById('search');
        
        function generateUniversityCards(){
            grid.innerHTML='';
            universities.forEach(u=>{
                const c=document.createElement('div');
                c.className='university-card';
                c.dataset.id=u.id;
                c.dataset.name=u.name.toLowerCase();
                c.dataset.shortname=u.shortName.toLowerCase();
                c.innerHTML=`<img src="${u.logoUrl}" alt="${u.name} Logo" loading="lazy" onerror="this.src='https://via.placeholder.com/100x100?text=${u.shortName}'"><h3>${u.name}</h3><p>${u.shortName}</p>`;
                c.addEventListener('click',()=>openProfileModal(u));
                grid.appendChild(c);
            });
        }
        
        function debounce(func,wait){
            let timeout;
            return function executedFunction(...args){
                const later=()=>{
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout=setTimeout(later,wait);
            };
        }
        
        const filterUniversities=debounce(async()=>{
            const t=searchInput.value.toLowerCase();
            const cards=[...grid.children];
            if(!t){
                cards.forEach(c=>c.style.display='flex');
                return;
            }
            for(const u of universities){
                const c=grid.querySelector(`[data-id="${u.id}"]`);
                const n=u.name.toLowerCase().includes(t)||u.shortName.toLowerCase().includes(t)||u.id.includes(t);
                if(n){
                    c.style.display='flex';
                    continue;
                }
                let p=profileCache[u.id];
                if(!p){
                    try{
                        p=await(await fetch(u.profileUrl)).text();
                        profileCache[u.id]=p;
                    }catch(e){
                        console.error(`Error loading ${u.name}:`,e);
                        c.style.display='none';
                        continue;
                    }
                }
                c.style.display=p.toLowerCase().includes(t)?'flex':'none';
            }
        },250);
        
        async function openProfileModal(u){
            const m=document.getElementById('profile-modal'),
                  t=document.getElementById('modal-title'),
                  b=document.getElementById('modal-body');
            t.textContent=`Perfil de Egreso - ${u.name}`;
            b.innerHTML='<p>Cargando...</p>';
            m.style.display='block';
            try{
                let p=profileCache[u.id];
                if(!p){
                    p=await(await fetch(u.profileUrl)).text();
                    profileCache[u.id]=p;
                }
                const f=marked.parse(p);
                b.innerHTML=searchInput.value.length>2?highlightSearchTerm(f,searchInput.value.toLowerCase()):f;
            }catch(e){
                console.error(`Error loading ${u.name}:`,e);
                b.innerHTML='<p>Error al cargar el perfil.</p>';
            }
        }
        
        function highlightSearchTerm(h,t){
            if(!t)return h;
            const r=new RegExp(`(${t})`,'gi'),
                  p=new DOMParser(),
                  d=p.parseFromString(h,'text/html');
            function n(node){
                if(node.nodeType===3&&node.textContent.trim()){
                    const s=document.createElement('span');
                    s.innerHTML=node.textContent.replace(r,'<span class="highlight-match">$1</span>');
                    node.parentNode.replaceChild(s,node);
                }else if(node.nodeType===1)node.childNodes.forEach(n);
            }
            n(d.body);
            return d.body.innerHTML;
        }
        
        function closeModal(){
            document.getElementById('profile-modal').style.display='none';
        }
        
        function populateCompareSelector(){
            const select=document.getElementById('compare-select');
            universities.forEach(u=>{
                const opt=document.createElement('option');
                opt.value=u.id;
                opt.text=u.name;
                select.appendChild(opt);
            });
        }
        
        const filterCompareUniversities=debounce(async()=>{
            const t=document.getElementById('compare-search').value.toLowerCase();
            const profileDiv=document.getElementById('compare-profile-1');
            if(!t){
                profileDiv.innerHTML='<h3>Perfil 1</h3><div class="content">Busca una universidad o palabra clave.</div>';
                return;
            }
            let found=false;
            for(const u of universities){
                const n=u.name.toLowerCase().includes(t)||u.shortName.toLowerCase().includes(t)||u.id.includes(t);
                if(n){
                    await updateCompareProfileBySearch(u,t);
                    found=true;
                    break;
                }
                let p=profileCache[u.id];
                if(!p){
                    try{
                        p=await(await fetch(u.profileUrl)).text();
                        profileCache[u.id]=p;
                    }catch(e){
                        console.error(`Error loading ${u.name}:`,e);
                        continue;
                    }
                }
                if(p.toLowerCase().includes(t)){
                    await updateCompareProfileBySearch(u,t);
                    found=true;
                    break;
                }
            }
            if(!found){
                profileDiv.innerHTML='<h3>Perfil 1</h3><div class="content">No se encontraron coincidencias.</div>';
            }
        },250);
        
        async function updateCompareProfileBySearch(u,t){
            const profileDiv=document.getElementById('compare-profile-1');
            profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">Cargando...</div>`;
            try{
                let p=profileCache[u.id];
                if(!p){
                    p=await(await fetch(u.profileUrl)).text();
                    profileCache[u.id]=p;
                }
                const f=marked.parse(p);
                profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">${t.length>2?highlightSearchTerm(f,t):f}</div>`;
            }catch(e){
                console.error(`Error loading ${u.name}:`,e);
                profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">Error al cargar el perfil.</div>`;
            }
        }
        
        async function updateCompareProfileBySelect(){
            const select=document.getElementById('compare-select'),
                  profileDiv=document.getElementById('compare-profile-2'),
                  selectedId=select.value;
            if(!selectedId){
                profileDiv.innerHTML='<h3>Perfil 2</h3><div class="content">Selecciona una universidad.</div>';
                return;
            }
            const u=universities.find(univ=>univ.id===selectedId);
            profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">Cargando...</div>`;
            try{
                let p=profileCache[u.id];
                if(!p){
                    p=await(await fetch(u.profileUrl)).text();
                    profileCache[u.id]=p;
                }
                const f=marked.parse(p);
                profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">${f}</div>`;
            }catch(e){
                console.error(`Error loading ${u.name}:`,e);
                profileDiv.innerHTML=`<h3>${u.name}</h3><div class="content">Error al cargar el perfil.</div>`;
            }
        }
        
        window.addEventListener('click',e=>{
            if(e.target===document.getElementById('profile-modal'))closeModal();
        });
        searchInput.addEventListener('input',filterUniversities);
        document.addEventListener('DOMContentLoaded',()=>{
            generateUniversityCards();
            populateCompareSelector();
            document.getElementById('compare-search').addEventListener('input',filterCompareUniversities);
            document.getElementById('compare-select').addEventListener('change',updateCompareProfileBySelect);
        });
    </script>
</body>
</html>
